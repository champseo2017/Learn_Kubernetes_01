<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô K8s: Scaling & Self-Healing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
          font-family: 'Inter', sans-serif;
          background-color: #111827;
          color: #e5e7eb;
      }
      .gradient-bg {
          background: radial-gradient(circle, rgba(37,99,235,0.2) 0%, rgba(17,24,39,0) 50%);
      }
      .card {
          background-color: #1f2937;
          border: 1px solid #374151;
          border-radius: 0.75rem;
          transition: all 0.3s ease;
      }
      .code-block {
          background-color: #0d1117;
          border: 1px solid #30363d;
          border-radius: 0.5rem;
          font-family: 'Courier New', Courier, monospace;
          white-space: pre-wrap;
          position: relative;
      }
      .copy-btn {
          position: absolute;
          top: 0.5rem;
          right: 0.5rem;
          background-color: #374151;
          color: #9ca3af;
          border: none;
          padding: 0.25rem 0.5rem;
          border-radius: 0.25rem;
          cursor: pointer;
          opacity: 0.5;
          transition: opacity 0.2s ease;
      }
      .code-block:hover .copy-btn {
          opacity: 1;
      }
      .pod {
          width: 60px;
          height: 60px;
          background-color: #2563eb;
          border-radius: 0.5rem;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          font-size: 0.75rem;
          color: white;
          transition: all 0.5s ease;
          transform-origin: bottom;
          border: 2px solid #3b82f6;
      }
      .pod.creating {
          transform: scale(0);
          animation: pop-in 0.5s forwards;
      }
      .pod.terminating {
          animation: pop-out 0.5s forwards;
      }
      .pod.crashed {
          background-color: #dc2626;
          border-color: #ef4444;
          animation: shake 0.5s;
      }
      @keyframes pop-in {
          0% { transform: scale(0); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
      }
      @keyframes pop-out {
          0% { transform: scale(1); opacity: 1; }
          100% { transform: scale(0); opacity: 0; }
      }
      @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          50% { transform: translateX(5px); }
          75% { transform: translateX(-5px); }
      }
    </style>
  </head>
  <body class="p-4 sm:p-8 gradient-bg">
    <div class="max-w-5xl mx-auto">
      <header class="text-center mb-12">
        <h1 class="text-4xl sm:text-5xl font-bold text-white mb-2">
          ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏´‡∏±‡∏®‡∏à‡∏£‡∏£‡∏¢‡πå‡∏Ç‡∏≠‡∏á Kubernetes
        </h1>
        <p class="text-lg text-blue-400">Scaling & Self-Healing</p>
      </header>

      <!-- Scaling Section -->
      <div class="card p-6 mb-8">
        <h2 class="text-2xl font-bold text-white mb-4">
          ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: Scaling (‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö) üöÄ
        </h2>
        <p class="mb-6 text-gray-300">
          ‡πÄ‡∏°‡∏∑‡πà‡∏≠ traffic ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Pods
          ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
          ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£
        </p>

        <div
          class="mb-6 bg-gray-800/50 border-l-4 border-blue-400 p-4 rounded-r-lg"
        >
          <h4 class="font-bold text-blue-300 mb-2">
            üß† ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á (How it works)
          </h4>
          <p class="text-sm text-gray-300">
            ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Pods ‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏±‡πà‡∏á "‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£" ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤
            <strong>Deployment</strong> ‡∏ß‡πà‡∏≤ "‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡πÉ‡∏´‡πâ‡∏°‡∏µ Pods 5 ‡∏ï‡∏±‡∏ß‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏∞"
            ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô Deployment ‡∏à‡∏∞‡πÑ‡∏õ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Pods ‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏á
            ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á <strong>Declarative System</strong>:
            ‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (Desired State)
            ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏á
          </p>
        </div>

        <div
          id="scaling-pods"
          class="flex flex-wrap gap-4 p-4 border border-gray-600 rounded-lg mb-6 min-h-[84px] bg-gray-800/50"
        >
          <!-- Pods will be dynamically added here -->
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          <button
            id="scale-up-btn"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Scale Up to 5 Pods
          </button>
          <button
            id="scale-down-btn"
            class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Scale Down to 2 Pods
          </button>
        </div>

        <div class="mt-6">
          <h3 class="font-semibold text-white mb-2">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:</h3>
          <div class="code-block p-4">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code id="scaling-command-output"
              >$ kubectl scale deployment hello-k8s-deployment
              --replicas=2</code
            >
          </div>
        </div>
      </div>

      <!-- Self-Healing Section -->
      <div class="card p-6">
        <h2 class="text-2xl font-bold text-white mb-4">
          ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: Self-Healing (‡∏Å‡∏≤‡∏£‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á) ‚ù§Ô∏è‚Äçü©π
        </h2>
        <p class="mb-6 text-gray-300">
          ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏ñ‡πâ‡∏≤ Pod ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏•‡πà‡∏°‡πÑ‡∏õ? Kubernetes ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Pod
          ‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
        </p>

        <div
          class="mb-6 bg-gray-800/50 border-l-4 border-red-400 p-4 rounded-r-lg"
        >
          <h4 class="font-bold text-red-300 mb-2">
            üß† ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á (How it works)
          </h4>
          <p class="text-sm text-gray-300">
            ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á <strong>Deployment</strong> ‡∏°‡∏µ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤
            <strong>Controller Loop</strong> ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
            ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏Ñ‡∏≠‡∏¢‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö "‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô" (Desired State: ‡∏°‡∏µ 2 Pods)
            ‡∏Å‡∏±‡∏ö "‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á" (Actual State: ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà 1 Pod ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏µ‡∏Å‡∏•‡πà‡∏°‡πÑ‡∏õ)
            ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ 2 ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô Controller ‡∏à‡∏∞‡∏•‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            (Reconcile) ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Pod
            ‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô
          </p>
        </div>

        <div
          id="healing-pods"
          class="flex flex-wrap gap-4 p-4 border border-gray-600 rounded-lg mb-6 min-h-[84px] bg-gray-800/50"
        >
          <!-- Pods will be dynamically added here -->
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          <button
            id="crash-pod-btn"
            class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            ‡∏à‡∏≥‡∏•‡∏≠‡∏á Pod ‡∏•‡πà‡∏°!
          </button>
          <button
            id="reset-healing-btn"
            class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"
          >
            Reset
          </button>
        </div>

        <div class="mt-6">
          <h3 class="font-semibold text-white mb-2">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ:</h3>
          <div class="code-block p-4">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code id="healing-command-output"
              >$ kubectl delete pod &lt;pod-name&gt;</code
            >
          </div>
        </div>
      </div>

      <footer class="text-center mt-12 text-gray-500">
        <p>
          ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏û‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á Declarative System: ‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà "‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®" ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞
          Kubernetes ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á
        </p>
      </footer>
    </div>

    <script>
      // --- Utility Functions ---
      function copyCode(button) {
        const codeBlock = button.nextElementSibling;
        const text = codeBlock.innerText;
        const textarea = document.createElement("textarea");
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);

        const originalText = button.innerText;
        button.innerText = "Copied!";
        setTimeout(() => {
          button.innerText = originalText;
        }, 1500);
      }

      function createPodElement(id) {
        const pod = document.createElement("div");
        pod.className = "pod";
        pod.id = `pod-${id}`;
        pod.textContent = `Pod ${id}`;
        return pod;
      }

      // --- Scaling Simulation ---
      const scalingPodsContainer = document.getElementById("scaling-pods");
      const scaleUpBtn = document.getElementById("scale-up-btn");
      const scaleDownBtn = document.getElementById("scale-down-btn");
      const scalingCommandOutput = document.getElementById(
        "scaling-command-output"
      );
      let currentScalingPods = 2;

      function renderScalingPods(targetCount) {
        const diff = targetCount - scalingPodsContainer.children.length;
        if (diff > 0) {
          // Scale Up
          for (let i = 0; i < diff; i++) {
            const podId = scalingPodsContainer.children.length + 1;
            const pod = createPodElement(podId);
            pod.classList.add("creating");
            scalingPodsContainer.appendChild(pod);
          }
        } else if (diff < 0) {
          // Scale Down
          const podsToRemove = Array.from(scalingPodsContainer.children).slice(
            targetCount
          );
          podsToRemove.forEach((pod) => {
            pod.classList.add("terminating");
            setTimeout(() => pod.remove(), 500);
          });
        }
        currentScalingPods = targetCount;
        scalingCommandOutput.textContent = `$ kubectl scale deployment hello-k8s-deployment --replicas=${targetCount}`;
      }

      scaleUpBtn.addEventListener("click", () => renderScalingPods(5));
      scaleDownBtn.addEventListener("click", () => renderScalingPods(2));

      // --- Self-Healing Simulation ---
      const healingPodsContainer = document.getElementById("healing-pods");
      const crashPodBtn = document.getElementById("crash-pod-btn");
      const resetHealingBtn = document.getElementById("reset-healing-btn");
      const healingCommandOutput = document.getElementById(
        "healing-command-output"
      );
      let healingPodCounter = 2;
      let isHealing = false;

      function initializeHealingPods() {
        healingPodsContainer.innerHTML = "";
        for (let i = 1; i <= 2; i++) {
          const pod = createPodElement(i);
          pod.classList.add("creating");
          healingPodsContainer.appendChild(pod);
        }
        healingPodCounter = 2;
      }

      crashPodBtn.addEventListener("click", () => {
        if (isHealing || healingPodsContainer.children.length === 0) return;
        isHealing = true;

        const podToCrash = healingPodsContainer.children[0];
        const crashedPodName = podToCrash.textContent
          .replace(" ", "-")
          .toLowerCase();
        healingCommandOutput.textContent = `$ kubectl delete pod ${crashedPodName}-xyz`;

        podToCrash.classList.add("crashed");

        setTimeout(() => {
          podToCrash.classList.remove("crashed");
          podToCrash.classList.add("terminating");
          setTimeout(() => podToCrash.remove(), 500);
        }, 1000);

        setTimeout(() => {
          healingPodCounter++;
          const newPod = createPodElement(healingPodCounter);
          newPod.classList.add("creating");
          healingPodsContainer.appendChild(newPod);
          healingCommandOutput.textContent = `// Pod ‡πÉ‡∏´‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!`;
          isHealing = false;
        }, 1800);
      });

      resetHealingBtn.addEventListener("click", initializeHealingPods);

      // --- Initial Render ---
      renderScalingPods(2);
      initializeHealingPods();
    </script>
  </body>
</html>
