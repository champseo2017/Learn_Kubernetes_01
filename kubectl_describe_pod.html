<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      kubectl describe pod ‚Äî ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ (HTML/CSS/JS ES2020 + SVG/Canvas)
    </title>
    <style>
      :root {
        --bg: #0b1020;
        --card: #12172a;
        --ink: #e9ecf1;
        --muted: #a9b2c7;
        --accent: #7cc4ff;
        --ok: #2ecc71;
        --warn: #f1c40f;
        --bad: #e74c3c;
        --chip: #1a2240;
        --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        --round: 1.2rem;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        background: linear-gradient(180deg, #0b1020, #0d1430);
        color: var(--ink);
        font: 16px/1.65 system-ui, -apple-system, "Segoe UI", Roboto, Inter,
          Arial;
      }
      a {
        color: var(--accent);
      }
      .wrap {
        max-width: 1100px;
        margin-inline: auto;
        padding: 28px 16px 80px;
      }
      header {
        display: grid;
        gap: 10px;
        align-items: center;
        margin-bottom: 20px;
      }
      h1 {
        font-size: clamp(24px, 4.8vw, 40px);
        margin: 0;
        letter-spacing: 0.3px;
      }
      header p {
        color: var(--muted);
        margin: 0;
      }

      .grid {
        display: grid;
        gap: 16px;
        grid-template-columns: 1.1fr 0.9fr;
      }
      @media (max-width: 980px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      .card {
        background: var(--card);
        border: 1px solid #1f2745;
        border-radius: var(--round);
        padding: 16px;
        box-shadow: 0 6px 30px #0003;
      }
      .card h2 {
        margin: 0 0 8px;
        font-size: 20px;
      }
      .sub {
        color: var(--muted);
        font-size: 14px;
        margin: 0 0 12px;
      }

      textarea,
      pre {
        width: 100%;
        background: #0a0f20;
        border: 1px solid #1f2745;
        color: var(--ink);
        border-radius: 14px;
        padding: 12px;
        font: 14px/1.55 var(--mono);
        min-height: 260px;
      }
      pre {
        min-height: unset;
        white-space: pre-wrap;
      }

      .row {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .btn {
        appearance: none;
        border: 1px solid #2a355c;
        background: #0f1530;
        color: var(--ink);
        padding: 10px 14px;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
      }
      .btn:hover {
        background: #141c3c;
      }
      .btn.ghost {
        background: transparent;
      }

      .kv {
        display: grid;
        grid-template-columns: 130px 1fr;
        gap: 8px 12px;
        margin-top: 12px;
      }
      .kv div {
        min-width: 0;
      }
      .chip {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: var(--chip);
        border: 1px solid #2a355c;
        color: #d8e4ff;
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 12.5px;
      }
      .chips {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .status {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid #2a355c;
        background: #0f1632;
      }
      .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      .conditions {
        margin-top: 10px;
        border-collapse: collapse;
        width: 100%;
      }
      .conditions th,
      .conditions td {
        border-bottom: 1px dashed #263056;
        padding: 8px 6px;
        text-align: left;
      }

      .two {
        display: grid;
        grid-template-columns: 120px 1fr;
        gap: 12px;
        align-items: center;
      }
      canvas {
        display: block;
        margin: auto;
        background: #0a0f20;
        border-radius: 16px;
      }

      .svg-box {
        background: #0a0f20;
        border: 1px solid #1f2745;
        border-radius: 14px;
        padding: 10px;
      }
      .svg-box svg {
        width: 100%;
        height: auto;
        display: block;
      }

      .foot {
        color: var(--muted);
        font-size: 13.5px;
        margin-top: 18px;
      }
      .kbd {
        font: 12px var(--mono);
        background: #0a0f20;
        border: 1px solid #2a355c;
        padding: 2px 6px;
        border-radius: 6px;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <h1>kubectl describe pod ‚Äî ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‚õ∫Ô∏è</h1>
        <p>
          ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á
          <span class="kbd">kubectl describe pod &lt;pod-name&gt;</span>
          ‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á Pod: ‡∏ä‡πà‡∏ß‡∏¢ Debug, ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, Labels,
          Node/Pod IP, ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏° (Conditions), Containers/Volumes ‡πÅ‡∏•‡∏∞
          Events ‡∏ï‡πà‡∏≤‡∏á ‡πÜ
        </p>
      </header>

      <section class="card">
        <h2>‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</h2>
        <ul>
          <li>
            <strong>‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡∏Å‡∏ß‡πà‡∏≤</strong>
            <span class="kbd">kubectl get pods</span> ‚Äî
            ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£ Debug
          </li>
          <li>
            ‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á <em>Name/Namespace</em>, <em>Node &amp; Node IP</em>,
            <em>Start Time</em>, <em>Labels</em>, <em>Status</em>,
            <em>Pod IP</em>, <em>Controller</em>, <em>Conditions</em>,
            <em>Containers</em>, <em>Volumes</em>, <em>Events</em>
          </li>
          <li>
            <strong>Ready: True</strong> = ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ü‡∏ü‡∏¥‡∏Å, ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ï‡πà‡∏≤‡∏á ‡πÜ
            ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏£‡πá‡∏ß
          </li>
        </ul>
      </section>

      <section class="grid" aria-label="interactive">
        <!-- LEFT: raw describe output -->
        <div class="card">
          <h2>
            ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            <span class="kbd">kubectl describe pod kubia-hczji</span>
          </h2>
          <p class="sub">
            ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‚Äú‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          </p>
          <textarea id="inputText" spellcheck="false">
Name:         kubia-hczji
Namespace:    default
Node:         gke-kubia-85f6-node-vs9f/10.132.0.3
Start Time:   Fri, 29 Apr 2016 14:12:33 +0200
Labels:       run=kubia
Status:       Running
IP:           10.1.0.2
Controllers:  ReplicationController/kubia
Containers:   ...
Conditions:
  Type        Status
  Ready       True
Volumes:      ...
Events:       ...
        </textarea
          >
          <div class="row" style="margin-top: 10px">
            <button class="btn" id="btnSummarize">‚ö°Ô∏è ‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
            <button class="btn ghost" id="btnReset">‚Ü∫ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
            <button class="btn ghost" id="btnCopyCmd">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</button>
          </div>
          <p class="foot">
            ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: <span class="kbd">kubectl describe pod kubia-hczji</span>
          </p>
        </div>

        <!-- RIGHT: parsed summary -->
        <div class="card" id="summaryCard">
          <h2>‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ö‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á (Structured)</h2>
          <p class="sub">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå describe</p>

          <div class="two">
            <canvas
              id="readyDial"
              width="120"
              height="120"
              title="Ready Dial"
            ></canvas>
            <div>
              <div class="status" id="statusBadge">
                <span
                  class="dot"
                  id="statusDot"
                  style="background: var(--warn)"
                ></span>
                <span id="statusText">Waiting‚Ä¶</span>
              </div>
              <div class="kv">
                <div>Pod</div>
                <div id="kvName">‚Äî</div>
                <div>Namespace</div>
                <div id="kvNs">‚Äî</div>
                <div>Node</div>
                <div id="kvNode">‚Äî</div>
                <div>Node IP</div>
                <div id="kvNodeIp">‚Äî</div>
                <div>Start Time</div>
                <div id="kvStart">‚Äî</div>
                <div>Pod IP</div>
                <div id="kvPodIp">‚Äî</div>
                <div>Controller</div>
                <div id="kvCtl">‚Äî</div>
                <div>Labels</div>
                <div id="kvLabels" class="chips"></div>
              </div>
            </div>
          </div>

          <table class="conditions" id="condTable" style="margin-top: 16px">
            <thead>
              <tr>
                <th>Condition</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <div class="svg-box" style="margin-top: 16px">
            <svg
              viewBox="0 0 680 180"
              role="img"
              aria-label="‡πÅ‡∏ú‡∏ô‡∏†‡∏≤‡∏û Node ‚Üí Pod"
            >
              <!-- ‡∏™‡πÑ‡∏ï‡∏•‡πå SVG ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ -->
              <defs>
                <linearGradient id="g1" x1="0" x2="1">
                  <stop offset="0" stop-color="#1d2b5a" />
                  <stop offset="1" stop-color="#0e1634" />
                </linearGradient>
              </defs>

              <!-- Node -->
              <rect
                x="20"
                y="30"
                rx="18"
                ry="18"
                width="280"
                height="120"
                fill="url(#g1)"
                stroke="#2a355c"
              />
              <text x="40" y="60" font-size="16" fill="#a9b2c7">Node</text>
              <text
                id="svgNodeName"
                x="40"
                y="86"
                font-size="18"
                fill="#e9ecf1"
                font-weight="600"
              >
                ‚Äî
              </text>
              <text id="svgNodeIp" x="40" y="110" font-size="14" fill="#9fb1d6">
                IP: ‚Äî
              </text>

              <!-- Connector -->
              <path
                d="M310,90 C360,90 400,90 440,90"
                stroke="#3b4b7e"
                stroke-width="2"
                fill="none"
                marker-end="url(#arrow)"
              />
              <defs>
                <marker
                  id="arrow"
                  markerWidth="10"
                  markerHeight="10"
                  refX="7"
                  refY="3"
                  orient="auto"
                >
                  <path d="M0,0 L0,6 L9,3 z" fill="#3b4b7e" />
                </marker>
              </defs>

              <!-- Pod -->
              <rect
                x="460"
                y="30"
                rx="18"
                ry="18"
                width="200"
                height="120"
                fill="url(#g1)"
                stroke="#2a355c"
              />
              <text x="480" y="60" font-size="16" fill="#a9b2c7">Pod</text>
              <text
                id="svgPodName"
                x="480"
                y="86"
                font-size="18"
                fill="#e9ecf1"
                font-weight="600"
              >
                ‚Äî
              </text>
              <text id="svgPodIp" x="480" y="110" font-size="14" fill="#9fb1d6">
                IP: ‚Äî
              </text>

              <!-- READY dot -->
              <circle id="svgReadyDot" cx="640" cy="50" r="7" fill="#f1c40f" />
            </svg>
          </div>

          <p class="foot">
            ‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°: ‡∏ß‡∏á‡∏Å‡∏•‡∏° Canvas = Ready Dial, ‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÉ‡∏ô SVG =
            ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á Pod
          </p>
        </div>
      </section>

      <section class="grid" style="margin-top: 16px">
        <div class="card">
          <h2>Cheat Sheet: ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢</h2>
          <ul>
            <li>
              <span class="kbd">kubectl get pods -n &lt;ns&gt;</span> ‚Äî ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
              Pods
            </li>
            <li>
              <span class="kbd"
                >kubectl describe pod &lt;pod&gt; -n &lt;ns&gt;</span
              >
              ‚Äî ‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Pod
            </li>
            <li>
              <span class="kbd"
                >kubectl logs &lt;pod&gt; [-c &lt;container&gt;] -n
                &lt;ns&gt;</span
              >
              ‚Äî ‡∏î‡∏π Log
            </li>
            <li>
              <span class="kbd"
                >kubectl get events -n &lt;ns&gt; --sort-by=.lastTimestamp</span
              >
              ‚Äî ‡πÑ‡∏•‡πà‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            </li>
          </ul>
        </div>
        <div class="card">
          <h2>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏ö‡∏ö Bash (‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢)</h2>
          <pre>
# ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á pod
$ kubectl describe pod kubia-hczji

# ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏π‡πâ:
Name:         kubia-hczji                # ‡∏ä‡∏∑‡πà‡∏≠ pod
Namespace:    default                    # namespace ‡∏ó‡∏µ‡πà pod ‡∏≠‡∏¢‡∏π‡πà
Node:         gke-kubia-85f6-node-vs9f/10.132.0.3  # node/Node IP
Start Time:   Fri, 29 Apr 2016 14:12:33 +0200      # ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ô
Labels:       run=kubia                  # ‡πÉ‡∏ä‡πâ select/‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ
Status:       Running                    # ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏ß‡∏°
IP:           10.1.0.2                   # Pod IP
Controllers:  ReplicationController/kubia
Conditions:
  Type   Status
  Ready  True                         # ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ü‡∏ü‡∏¥‡∏Å
        </pre
          >
        </div>
      </section>
    </div>

    <script>
      // ==========================
      // Utilities (ES2020 Clean Code)
      // ==========================

      /** ‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏ï‡∏£‡∏¥‡∏á‡πÅ‡∏ö‡∏ö "Key:   Value" ‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤ Value ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß */
      const valueAfterColon = (line) =>
        line.split(":").slice(1).join(":").trim();

      /** ‡πÅ‡∏¢‡∏Å‡∏â‡∏•‡∏≤‡∏Å (labels) ‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö "k1=v1 k2=v2" ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ comma */
      const parseLabels = (s = "") =>
        s
          .split(/[\s,]+/)
          .filter(Boolean)
          .map((pair) => {
            const [k, v] = pair.split("=");
            return k && v ? { key: k.trim(), val: v.trim() } : null;
          })
          .filter(Boolean);

      /** ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå kubectl describe pod (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏¢‡πà‡∏≠ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏™‡∏≠‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô) */
      const parseDescribe = (text = "") => {
        const result = { conditions: [], labels: [] };
        const lines = text.split("\n").map((l) => l.trim());
        let inConditions = false;

        for (const l of lines) {
          if (!l) continue;
          if (l.startsWith("Name:")) result.name = valueAfterColon(l);
          else if (l.startsWith("Namespace:"))
            result.namespace = valueAfterColon(l);
          else if (l.startsWith("Node:")) {
            const nodeRaw = valueAfterColon(l);
            const [nodeName, nodeIp] = nodeRaw.split("/");
            result.nodeName = nodeName?.trim();
            result.nodeIp = nodeIp?.trim();
          } else if (l.startsWith("Start Time:"))
            result.startTime = valueAfterColon(l);
          else if (l.startsWith("Labels:"))
            result.labels = parseLabels(valueAfterColon(l));
          else if (l.startsWith("Status:")) result.status = valueAfterColon(l);
          else if (l.startsWith("IP:")) result.podIp = valueAfterColon(l);
          else if (l.startsWith("Controllers:"))
            result.controller = valueAfterColon(l);
          else if (l.startsWith("Conditions:")) {
            inConditions = true;
          } else if (inConditions) {
            if (/^Volumes:|^Events:|^Containers:/i.test(l)) {
              inConditions = false;
              continue;
            }
            if (/^Type\s+Status/i.test(l)) continue; // header
            const parts = l.split(/\s+/);
            if (parts.length >= 2) {
              const [type, status] = parts;
              result.conditions.push({ type, status });
            }
          }
        }
        return result;
      };

      /** ‡∏™‡∏£‡πâ‡∏≤‡∏á element ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ */
      const el = (tag, attrs = {}, ...children) => {
        const node = document.createElement(tag);
        Object.entries(attrs).forEach(([k, v]) => {
          if (k === "class") node.className = v;
          else if (k === "html") node.innerHTML = v;
          else node.setAttribute(k, v);
        });
        children.forEach((c) => node.append(c));
        return node;
      };

      /** ‡∏ß‡∏≤‡∏î‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏ô Canvas (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß=‡∏û‡∏£‡πâ‡∏≠‡∏°, ‡πÅ‡∏î‡∏á=‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°, ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á=‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö) */
      const drawReadyDial = (canvas, ready) => {
        const ctx = canvas.getContext("2d");
        const w = canvas.width,
          h = canvas.height,
          r = Math.min(w, h) / 2 - 10;
        ctx.clearRect(0, 0, w, h);

        // ‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
        ctx.lineWidth = 12;
        ctx.strokeStyle = "#2a355c";
        ctx.beginPath();
        ctx.arc(w / 2, h / 2, r, 0, Math.PI * 2);
        ctx.stroke();

        // ‡∏Ñ‡πà‡∏≤ progress: Ready=True = 100%, False = 40%, Unknown = 70%
        const color =
          ready === true
            ? getComputedStyle(document.documentElement)
                .getPropertyValue("--ok")
                .trim()
            : ready === false
            ? getComputedStyle(document.documentElement)
                .getPropertyValue("--bad")
                .trim()
            : getComputedStyle(document.documentElement)
                .getPropertyValue("--warn")
                .trim();
        const pct = ready === true ? 1 : ready === false ? 0.4 : 0.7;
        ctx.strokeStyle = color;
        ctx.beginPath();
        ctx.arc(
          w / 2,
          h / 2,
          r,
          -Math.PI / 2,
          -Math.PI / 2 + Math.PI * 2 * pct
        );
        ctx.stroke();

        // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á
        ctx.fillStyle = "#d8e4ff";
        ctx.font = "700 18px system-ui, sans-serif";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText(
          ready === true ? "READY" : ready === false ? "NOT READY" : "UNKNOWN",
          w / 2,
          h / 2
        );
      };

      /** ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
      const renderSummary = (data) => {
        const byId = (id) => document.getElementById(id);
        const set = (id, v) => (byId(id).textContent = v ?? "‚Äî");

        set("kvName", data.name);
        set("kvNs", data.namespace);
        set("kvNode", data.nodeName);
        set("kvNodeIp", data.nodeIp);
        set("kvStart", data.startTime);
        set("kvPodIp", data.podIp);
        set("kvCtl", data.controller);

        // Labels ‚Üí chips
        const $labels = byId("kvLabels");
        $labels.innerHTML = "";
        data.labels?.forEach(({ key, val }) =>
          $labels.append(el("span", { class: "chip" }, `${key}=${val}`))
        );

        // Conditions table
        const $tbody = document.querySelector("#condTable tbody");
        $tbody.innerHTML = "";
        (data.conditions ?? []).forEach((c) =>
          $tbody.append(
            el("tr", {}, el("td", {}, c.type), el("td", {}, c.status))
          )
        );

        // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏ß‡∏°
        const readyCond = data.conditions?.find((c) => /ready/i.test(c.type));
        const ready = readyCond ? /true/i.test(readyCond.status) : undefined; // undefined = unknown

        const $badge = document.getElementById("statusBadge");
        const $dot = document.getElementById("statusDot");
        const $text = document.getElementById("statusText");
        const css = getComputedStyle(document.documentElement);
        const ok = css.getPropertyValue("--ok").trim();
        const warn = css.getPropertyValue("--warn").trim();
        const bad = css.getPropertyValue("--bad").trim();

        if (ready === true) {
          $dot.style.background = ok;
          $text.textContent = `Status: ${data.status ?? "Running"} (Ready)`;
        } else if (ready === false) {
          $dot.style.background = bad;
          $text.textContent = `Status: ${data.status ?? "Unknown"} (Not Ready)`;
        } else {
          $dot.style.background = warn;
          $text.textContent = `Status: ${data.status ?? "Unknown"} (Unknown)`;
        }

        // Canvas dial
        drawReadyDial(document.getElementById("readyDial"), ready);

        // SVG map
        updateSVG({
          nodeName: data.nodeName,
          nodeIp: data.nodeIp,
          podName: data.name,
          podIp: data.podIp,
          ready,
        });
      };

      /** ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï SVG ‡πÅ‡∏ú‡∏ô‡∏†‡∏≤‡∏û Node ‚Üí Pod */
      const updateSVG = ({ nodeName, nodeIp, podName, podIp, ready }) => {
        const set = (id, v) =>
          (document.getElementById(id).textContent = v ?? "‚Äî");
        set("svgNodeName", nodeName);
        set("svgNodeIp", `IP: ${nodeIp ?? "‚Äî"}`);
        set("svgPodName", podName);
        set("svgPodIp", `IP: ${podIp ?? "‚Äî"}`);
        const dot = document.getElementById("svgReadyDot");
        const css = getComputedStyle(document.documentElement);
        dot.setAttribute(
          "fill",
          ready === true
            ? css.getPropertyValue("--ok").trim()
            : ready === false
            ? css.getPropertyValue("--bad").trim()
            : css.getPropertyValue("--warn").trim()
        );
      };

      // ==========================
      // Actions / Handlers
      // ==========================
      const $input = document.getElementById("inputText");
      const DEFAULT_TEXT = $input.value;

      const summarizeNow = () => renderSummary(parseDescribe($input.value));

      document
        .getElementById("btnSummarize")
        .addEventListener("click", summarizeNow);
      document.getElementById("btnReset").addEventListener("click", () => {
        $input.value = DEFAULT_TEXT;
        summarizeNow();
      });
      document
        .getElementById("btnCopyCmd")
        .addEventListener("click", async () => {
          // ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á kubectl
          const cmd = "kubectl describe pod kubia-hczji";
          try {
            await navigator.clipboard.writeText(cmd);
            alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: " + cmd);
          } catch {
            alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏≠‡∏á");
          }
        });

      // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
      summarizeNow();
    </script>
  </body>
</html>
